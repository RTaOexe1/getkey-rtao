<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>RTaO Hub - Get Key</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body { font-family: system-ui, Arial; background: #0b0b0f; color: #fff; display:flex; min-height:100vh; align-items:center; justify-content:center; }
.card { background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01)); padding:24px; border-radius:16px; width:360px; box-shadow:0 8px 30px rgba(0,0,0,0.6); }
button { padding:10px 14px; border-radius:8px; border: none; cursor:pointer; }
select, input { width:100%; padding:10px; border-radius:8px; margin-bottom:10px; }
</style>
</head>
<body>
<div class="card">
<h2>Nexora Hub</h2>
<p>Choose a method and get redirected to complete the task to receive a one-time key (24h)</p>
<select id="method">
<option value="linkvertise">Linkvertise</option>
<option value="workink">Work.ink</option>
</select>
<button id="getlink">Get Link</button>
<hr/>
<h3>Already returned? Claim key</h3>
<input id="session" placeholder="session id (from URL)">
<button id="claim">Claim Key</button>
<pre id="result"></pre>
<script>
document.getElementById('getlink').addEventListener('click', async ()=>{
  const method = document.getElementById('method').value;
  const res = await fetch('/api/create-link',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({method})});
  const data = await res.json();
  if(data && data.link) window.location.href = data.link; else alert('Error creating link');
});
document.getElementById('claim').addEventListener('click', async ()=>{
  const session = document.getElementById('session').value;
  const res = await fetch('/api/get-key?session=' + encodeURIComponent(session));
  const data = await res.json();
  document.getElementById('result').textContent = JSON.stringify(data,null,2);
});
const urlParams = new URLSearchParams(window.location.search);
if(urlParams.get('session')) document.getElementById('session').value = urlParams.get('session');
</script>
</div>
</body>
</html>
